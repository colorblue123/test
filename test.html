<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•è¯è¶£å‘³æ¶ˆæ¶ˆä¹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", sans-serif;
        }

        body {
            background: linear-gradient(135deg, #e6f7ff, #c2e9fb);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* æ³¢æµªèƒŒæ™¯ */
        .wave {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none"><path d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z" opacity=".25" fill="%2346a0f5"/><path d="M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z" opacity=".5" fill="%2346a0f5"/><path d="M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z" fill="%2346a0f5"/></svg>');
            background-size: cover;
            z-index: 1;
        }

        /* ä¹¦æœ¬å›¾æ¡ˆ */
        .books {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 2;
        }

        .book {
            width: 40px;
            height: 50px;
            background: #8B4513;
            border-radius: 3px;
            position: relative;
        }

        .book:nth-child(2) {
            background: #A0522D;
            height: 55px;
        }

        .book:nth-child(3) {
            background: #CD853F;
            height: 45px;
        }

        .book::after {
            content: "";
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
        }

        /* èŠ±æå›¾æ¡ˆ */
        .flower-branch {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 100px;
            height: 120px;
            z-index: 2;
        }

        .branch {
            position: absolute;
            width: 5px;
            height: 100px;
            background: #8B7355;
            top: 0;
            right: 50px;
            border-radius: 3px;
            transform: rotate(-10deg);
        }

        .flower {
            position: absolute;
            width: 25px;
            height: 25px;
            background: #FFB6C1;
            border-radius: 50%;
            top: 15px;
            right: 35px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .flower::before {
            content: "";
            position: absolute;
            width: 10px;
            height: 10px;
            background: #FFD700;
            border-radius: 50%;
        }

        .petal {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #FFB6C1;
            border-radius: 50%;
        }

        .petal:nth-child(1) {
            top: -5px;
            left: 50%;
            transform: translateX(-50%);
        }

        .petal:nth-child(2) {
            top: 50%;
            right: -5px;
            transform: translateY(-50%);
        }

        .petal:nth-child(3) {
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
        }

        .petal:nth-child(4) {
            top: 50%;
            left: -5px;
            transform: translateY(-50%);
        }

        .leaf {
            position: absolute;
            width: 15px;
            height: 10px;
            background: #90EE90;
            border-radius: 50% 0 50% 0;
            top: 40px;
            right: 45px;
            transform: rotate(45deg);
        }

        .leaf:nth-child(2) {
            top: 60px;
            right: 40px;
            transform: rotate(-30deg);
        }

        /* é¡µé¢å®¹å™¨ */
        .container {
            width: 100%;
            max-width: 1200px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin: 0 auto;
            z-index: 3;
            position: relative;
        }

        /* é¡µé¢æ ·å¼ */
        .page {
            display: none;
            width: 100%;
        }

        .page.active {
            display: block;
        }

        /* å•å…ƒé€‰æ‹©é¡µé¢æ ·å¼ */
        .unit-selection-page h1 {
            text-align: center;
            color: #6a5acd;
            margin-bottom: 30px;
            font-size: 2.5rem;
        }

        .units-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
        }

        .unit-item {
            display: flex;
            width: 100%;
            max-width: 350px;
            margin-bottom: 20px;
        }

        .unit-circle {
            width: 80px;
            height: 80px;
            background: #FFD700;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
            margin-right: 20px;
            flex-shrink: 0;
        }

        .unit-circle span {
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
        }

        .unit-card {
            flex-grow: 1;
            background: #f9f9f9;
            border-radius: 15px;
            padding: 15px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .unit-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-color: #6a5acd;
        }

        .unit-card h3 {
            color: #333;
            margin-bottom: 5px;
            font-size: 1.2rem;
        }

        .unit-card p {
            color: #666;
            font-size: 0.9rem;
        }

        /* å•å…ƒè¯¦æƒ…é¡µé¢æ ·å¼ */
        .unit-detail-page {
            text-align: center;
        }

        .btn-back {
            position: absolute;
            top: 20px;
            left: 20px;
            background: #6a5acd;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s;
        }

        .btn-back:hover {
            background: #5a4abd;
            transform: scale(1.1);
        }

        .unit-detail-page .unit-circle {
            width: 120px;
            height: 120px;
            margin: 0 auto 30px;
        }

        .unit-detail-page .unit-circle span {
            font-size: 2.5rem;
        }

        .dropdown-area {
            margin: 30px 0;
            position: relative;
        }

        .dropdown {
            width: 100%;
            padding: 15px 20px;
            background: white;
            border: 2px solid #E0E0E0;
            border-radius: 10px;
            font-size: 1.2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .dropdown:hover {
            border-color: #6a5acd;
        }

        .button-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-challenge {
            background: #D2B48C;
            color: white;
        }

        .btn-challenge:hover {
            background: #C19A6B;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(194, 154, 107, 0.3);
        }

        .btn-pk {
            background: #FFD700;
            color: #333;
        }

        .btn-pk:hover {
            background: #FFC400;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 196, 0, 0.3);
        }

        /* æ¸¸æˆé¡µé¢æ ·å¼ */
        .game-page h1 {
            text-align: center;
            color: #6a5acd;
            margin-bottom: 20px;
            font-size: 2.5rem;
        }

        .game-controls {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            margin-bottom: 20px;
            gap: 15px;
            background: #f8f9ff;
            padding: 15px;
            border-radius: 15px;
        }

        .control-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }

        select,
        button {
            padding: 10px 15px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        select {
            background-color: #f0f8ff;
            border: 2px solid #b0e0e6;
            min-width: 120px;
        }

        button {
            background: linear-gradient(to right, #6a5acd, #9370db);
            color: white;
            font-weight: bold;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #555;
            background: #f0f8ff;
            padding: 10px 20px;
            border-radius: 10px;
        }

        .timer {
            font-size: 1.8rem;
            text-align: center;
            margin: 20px 0;
            color: #ff6347;
            font-weight: bold;
            background: #fff9f0;
            padding: 10px;
            border-radius: 10px;
        }

        .game-board {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .player-section {
            flex: 1;
            background: #f9f9f9;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            min-height: 400px;
        }

        .player-header {
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.3rem;
            color: #6a5acd;
            padding-bottom: 10px;
            border-bottom: 2px solid #e6e6fa;
        }

        .cards-container {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
            min-height: 300px;
            align-content: flex-start;
        }

        .card {
            padding: 15px 20px;
            border-radius: 12px;
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            user-select: none;
            min-width: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            word-break: break-word;
        }

        .english-card {
            background: linear-gradient(135deg, #ffb6c1, #ff69b4);
            color: #8b0000;
        }

        .chinese-card {
            background: linear-gradient(135deg, #87ceeb, #1e90ff);
            color: #000080;
        }

        .card.selected {
            transform: scale(1.1);
            box-shadow: 0 0 15px 5px rgba(255, 215, 0, 0.7);
            z-index: 10;
        }

        .card.matched {
            visibility: hidden;
            opacity: 0;
            transform: scale(0);
            transition: all 0.5s;
        }

        .card.wrong {
            animation: shake 0.5s;
            background: linear-gradient(135deg, #ff9999, #ff3333);
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            20%,
            60% {
                transform: translateX(-5px);
            }

            40%,
            80% {
                transform: translateX(5px);
            }
        }

        .current-player-indicator {
            background: #ffeb3b;
            color: #333;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-top: 10px;
            display: inline-block;
        }

        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .modal h2 {
            color: #6a5acd;
            margin-bottom: 15px;
        }

        .modal p {
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .winner-section {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            gap: 20px;
        }

        .winner-trophy {
            font-size: 3rem;
            color: gold;
        }

        /* æš‚åœé®ç½©å±‚ */
        .pause-overlay {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 5;
            justify-content: center;
            align-items: center;
            border-radius: 20px;
        }

        .pause-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .pause-content h2 {
            color: #6a5acd;
            margin-bottom: 15px;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                padding: 30px 20px;
            }

            .unit-selection-page h1 {
                font-size: 2rem;
            }

            .unit-item {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .unit-circle {
                margin-right: 0;
                margin-bottom: 15px;
            }

            .unit-detail-page .unit-circle {
                width: 100px;
                height: 100px;
            }

            .unit-detail-page .unit-circle span {
                font-size: 2rem;
            }

            .dropdown {
                font-size: 1rem;
            }

            .btn {
                font-size: 1rem;
                padding: 12px 25px;
            }

            .game-board {
                flex-direction: column;
            }

            .game-controls {
                flex-direction: column;
                align-items: center;
            }

            h1 {
                font-size: 1.8rem;
            }

            .card {
                font-size: 1.2rem;
                min-width: 100px;
                padding: 12px 15px;
            }

            .control-group {
                justify-content: center;
            }
        }
    </style>
</head>

<body>
    <!-- æ³¢æµªèƒŒæ™¯ -->
    <div class="wave"></div>

    <!-- ä¹¦æœ¬å›¾æ¡ˆ -->
    <div class="books">
        <div class="book"></div>
        <div class="book"></div>
        <div class="book"></div>
    </div>

    <!-- èŠ±æå›¾æ¡ˆ -->
    <div class="flower-branch">
        <div class="branch"></div>
        <div class="flower">
            <div class="petal"></div>
            <div class="petal"></div>
            <div class="petal"></div>
            <div class="petal"></div>
        </div>
        <div class="leaf"></div>
        <div class="leaf"></div>
    </div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="container">
        <!-- å•å…ƒé€‰æ‹©é¡µé¢ -->
        <div class="page unit-selection-page active" id="unitSelectionPage">
            <h1>é€‰æ‹©å­¦ä¹ å•å…ƒ</h1>
            <div class="units-container">
                <div class="unit-item">
                    <div class="unit-circle">
                        <span>Unit 1</span>
                    </div>
                    <div class="unit-card" data-unit="1">
                        <h3>The digital age: Are we ready?</h3>
                        <p>æ•°å­—æ—¶ä»£ï¼šæˆ‘ä»¬å‡†å¤‡å¥½äº†å—ï¼Ÿ</p>
                    </div>
                </div>

                <div class="unit-item">
                    <div class="unit-circle">
                        <span>Unit 2</span>
                    </div>
                    <div class="unit-card" data-unit="2">
                        <h3>Life stories</h3>
                        <p>äººç”Ÿæ•…äº‹</p>
                    </div>
                </div>

                <div class="unit-item">
                    <div class="unit-circle">
                        <span>Unit 3</span>
                    </div>
                    <div class="unit-card" data-unit="3">
                        <h3>Let's go</h3>
                        <p>è®©æˆ‘ä»¬å‡ºå‘</p>
                    </div>
                </div>

                <div class="unit-item">
                    <div class="unit-circle">
                        <span>Unit 4</span>
                    </div>
                    <div class="unit-card" data-unit="4">
                        <h3>When work is a pleasure</h3>
                        <p>å½“å·¥ä½œæ˜¯ä¸€ç§ä¹è¶£</p>
                    </div>
                </div>

                <div class="unit-item">
                    <div class="unit-circle">
                        <span>Unit 5</span>
                    </div>
                    <div class="unit-card" data-unit="5">
                        <h3>China's space dream</h3>
                        <p>ä¸­å›½çš„å¤ªç©ºæ¢¦</p>
                    </div>
                </div>

                <div class="unit-item">
                    <div class="unit-circle">
                        <span>Unit 6</span>
                    </div>
                    <div class="unit-card" data-unit="6">
                        <h3>The economy: Power behind everyday life</h3>
                        <p>ç»æµï¼šæ—¥å¸¸ç”Ÿæ´»çš„åŠ¨åŠ›</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- å•å…ƒè¯¦æƒ…é¡µé¢ -->
        <div class="page unit-detail-page" id="unitDetailPage">
            <button class="btn-back" id="backButton">â†</button>

            <div class="unit-circle">
                <span id="currentUnit">Unit 1</span>
            </div>

            <div class="dropdown-area">
                <div class="dropdown" id="unitDropdown">The digital age: Are we ready?</div>
            </div>

            <div class="game-controls">
                <div class="control-group">
                    <label for="difficulty">éš¾åº¦é€‰æ‹©ï¼š</label>
                    <select id="difficulty">
                        <option value="5">å®¹æ˜“ï¼ˆ5è¯ï¼‰</option>
                        <option value="10" selected>æ™®é€šï¼ˆ10è¯ï¼‰</option>
                        <option value="15">å›°éš¾ï¼ˆ15è¯ï¼‰</option>
                    </select>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-challenge" id="challengeButton">å¼€å§‹é—¯å…³</button>
                <button class="btn btn-pk" id="pkButton">åŒäººPK</button>
            </div>
        </div>

        <!-- æ¸¸æˆé¡µé¢ -->
        <div class="page game-page" id="gamePage">
            <button class="btn-back" id="backToDetailButton">â†</button>

            <h1>å•è¯è¶£å‘³æ¶ˆæ¶ˆä¹</h1>

            <div class="game-controls">
                <div class="control-group">
                    <div>å½“å‰å•å…ƒ: <span id="currentUnitDisplay">Unit 1</span></div>
                    <div>æ¸¸æˆæ¨¡å¼: <span id="currentModeDisplay">å•äººæ¨¡å¼</span></div>
                    <div>éš¾åº¦: <span id="currentDifficultyDisplay">æ™®é€šï¼ˆ10è¯ï¼‰</span></div>
                </div>

                <div class="control-group">
                    <button id="startBtn">å¼€å§‹æ¸¸æˆ</button>
                    <button id="pauseBtn">æš‚åœ</button>
                    <button id="restartBtn">é‡æ–°å¼€å§‹</button>
                </div>
            </div>

            <div class="game-info">
                <div>ç©å®¶1å¾—åˆ†: <span id="player1Score">0</span></div>
                <div>ç©å®¶2å¾—åˆ†: <span id="player2Score">0</span></div>
            </div>

            <div class="timer">
                ç”¨æ—¶: <span id="timerDisplay">00:00</span>
            </div>

            <!-- æš‚åœé®ç½©å±‚ -->
            <div class="pause-overlay" id="pauseOverlay">
                <div class="pause-content">
                    <h2>æ¸¸æˆå·²æš‚åœ</h2>
                    <p>ç‚¹å‡»"ç»§ç»­"æŒ‰é’®æ¢å¤æ¸¸æˆ</p>
                    <button id="resumeBtn">ç»§ç»­</button>
                </div>
            </div>

            <div class="game-board">
                <div class="player-section">
                    <div class="player-header">ç©å®¶1</div>
                    <div id="player1Indicator" class="current-player-indicator" style="display: none;">å½“å‰ç©å®¶</div>
                    <div class="cards-container" id="player1Cards"></div>
                </div>

                <div class="player-section">
                    <div class="player-header">ç©å®¶2</div>
                    <div id="player2Indicator" class="current-player-indicator" style="display: none;">å½“å‰ç©å®¶</div>
                    <div class="cards-container" id="player2Cards"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- æˆåŠŸæ¨¡æ€æ¡† -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <h2>æ¸¸æˆå®Œæˆï¼</h2>
            <div class="winner-section">
                <div class="winner-trophy">ğŸ†</div>
                <div>
                    <p id="winnerText">ç©å®¶1è·èƒœï¼</p>
                    <p>ç”¨æ—¶: <span id="completionTime">00:00</span></p>
                </div>
                <div class="winner-trophy">ğŸ†</div>
            </div>
            <button id="closeModal">è¿”å›ä¸»é¡µé¢</button>
        </div>
    </div>

    <script>
        // å•è¯æ•°æ®
        const wordData = {
            1: [
                { english: "adequacy", chinese: "n. [U] å……åˆ†ï¼›è¶³å¤Ÿ" },
                { english: "alter", chinese: "v.ï¼ˆä½¿ï¼‰å˜åŒ–ï¼›ï¼ˆä½¿ï¼‰æ”¹å˜" },
                { english: "assess", chinese: "vt. è¯„ä»·ï¼›è¯„å®šï¼›å¯¹â€¦ä¼°ä»·ï¼›ä¼°è®¡â€¦çš„æˆæœ¬" },
                { english: "associate", chinese: "n. [C] åŒäº‹ï¼›ï¼ˆç”Ÿæ„ï¼‰ä¼™ä¼´ï¼›vt. è”æƒ³ï¼›è”ç³»" },
                { english: "acceleration", chinese: "n. [sing., U] åŠ å¿«ï¼›å¢é€Ÿ" },
                { english: "identical", chinese: "a. å®Œå…¨ç›¸åŒçš„ï¼›éå¸¸ç›¸ä¼¼çš„" },
                { english: "burden", chinese: "n. [C]ï¼ˆä¹‰åŠ¡ã€è´£ä»»ç­‰çš„ï¼‰é‡æ‹…ï¼Œè´Ÿæ‹…ï¼›vt. å—æŸäº‹ç‰©çš„è´Ÿæ‹…æ‰€å›°æ‰°ï¼›æ‰¿å—æŸäº‹ç‰©çš„è´Ÿæ‹…" },
                { english: "cockpit", chinese: "n. [C]ï¼ˆé£æœºã€èµ›è½¦çš„ï¼‰é©¾é©¶èˆ±ï¼›ï¼ˆå°èˆ¹çš„ï¼‰åº§èˆ±" },
                { english: "commerce", chinese: "n. [U] ä¹°å–ï¼›è´¸æ˜“ï¼›å•†åŠ¡ï¼›å•†ä¸š" },
                { english: "consultant", chinese: "n. [C] é¡¾é—®" },
                { english: "collaborate", chinese: "vi.ï¼ˆå°¤æŒ‡åœ¨ç§‘å­¦æˆ–è‰ºæœ¯æ–¹é¢ï¼‰åˆä½œï¼Œåä½œ" },
                { english: "convention", chinese: "n. [C, U] ä¹ ä¿—ï¼›æƒ¯ä¾‹ï¼›å¸¸è§„ï¼›[C] å¤§ä¼šï¼›ä¼šè®®ï¼›é›†ä¼šï¼›[C]ï¼ˆå°¤æŒ‡å›½é™…æ€§çš„ï¼‰å…¬çº¦ï¼Œåå®š" },
                { english: "converse", chinese: "vi. è°ˆè¯ï¼›äº¤è°ˆï¼›n. [sing.] ç›¸åçš„äº‹ç‰©ï¼›ï¼ˆäº‹å®æˆ–é™ˆè¿°çš„ï¼‰åé¢" },
                { english: "critic", chinese: "n.ï¼ˆè‰ºæœ¯ã€éŸ³ä¹ã€ç”µå½±ç­‰çš„ï¼‰è¯„è®ºå®¶ï¼Œæ‰¹è¯„å®¶ï¼›n. [C] æ‰¹è¯„è€…ï¼›è¯„è®ºå®¶" },
                { english: "discrete", chinese: "a. åˆ†å¼€çš„ï¼›åˆ†ç¦»çš„ï¼›ç¦»æ•£çš„" }
            ],
            2: [
                { english: "camel", chinese: "n. [C] éª†é©¼" },
                { english: "yore", chinese: "n. [U]ï¼ˆè¯—ï¼‰å¾€æ˜”ï¼Œæ˜”æ—¶" },
                { english: "pearl", chinese: "n. [C, U] çç ï¼›çå“" },
                { english: "journal", chinese: "n. [C] æ—¥å¿—ï¼›æ—¥è®°ï¼›æœŸåˆŠ" },
                { english: "exotic", chinese: "a. ç”±å¤–å›½å¼•è¿›çš„ï¼›å…·æœ‰å¼‚å›½æƒ…è°ƒçš„" },
                { english: "naval", chinese: "a.ï¼ˆå°¤æŒ‡æ—§æ—¶ï¼‰æµ·å†›çš„ï¼›å†›èˆ°çš„" },
                { english: "treaty", chinese: "n. [C]ï¼ˆå›½å®¶ä¹‹é—´çš„ï¼‰æ¡çº¦ï¼›åè®®" },
                { english: "past", chinese: "n. [sing.] è¿‡å»ï¼Œæ˜”æ—¥" },
                { english: "pirate", chinese: "n. [C] æµ·ç›—ï¼›v. æŠ¢åŠ«ï¼ˆæµ·ä¸Šèˆ¹åªï¼‰" },
                { english: "diplomatic", chinese: "a. å¤–äº¤çš„ï¼›ä»äº‹å¤–äº¤çš„" },
                { english: "ambassador", chinese: "n. [C] å¤§ä½¿" },
                { english: "realm", chinese: "n. [C] ç‹å›½ï¼›ï¼ˆçŸ¥è¯†ã€æ´»åŠ¨ã€æ€æƒ³çš„ï¼‰é¢†åŸŸï¼ŒèŒƒå›´" },
                { english: "maintenance", chinese: "n. [U] ç»´æŠ¤ï¼›ä¿å…»ï¼›ç»´ä¿®" },
                { english: "appoint", chinese: "v. ä»»å‘½ï¼›æŒ‡å®šï¼ˆæ—¶é—´æˆ–åœ°ç‚¹ï¼‰" },
                { english: "liquor", chinese: "n. [U] çƒˆæ€§é…’" }
            ],
            3: [
                { english: "groan", chinese: "vi. å‘»åŸï¼Œå‘å‡ºå“¼å“¼å£°ï¼›v. æŠ±æ€¨ï¼›n. [C] å‘»åŸå£°ï¼Œå“¼å“¼å£°" },
                { english: "terminal", chinese: "n. [C] é›†æ•£ç«™ï¼Œç»ˆç‚¹ç«™" },
                { english: "burdensome", chinese: "a. ä»¤äººçƒ¦æ¼çš„ï¼›æˆä¸ºè´Ÿæ‹…çš„" },
                { english: "airborne", chinese: "a.ï¼ˆé£æœºæˆ–ä¹˜å®¢ï¼‰åœ¨ç©ºä¸­çš„ï¼Œé£è¡Œä¸­çš„ï¼›ç©ºæ°”ä¼ æ’­çš„" },
                { english: "cluster", chinese: "n. [C] ç¾¤ï¼›ç»„ï¼›æŸï¼›ä¸²ï¼›ç°‡ï¼›v. ç¾¤é›†ï¼›èšé›†" },
                { english: "keepsake", chinese: "n. [C] å°çºªå¿µå“" },
                { english: "decidedly", chinese: "ad. ç¡®å®æ— ç–‘åœ°ï¼›æ˜¾ç„¶ï¼›åšå†³åœ°ï¼›æœæ–­åœ°" },
                { english: "corporate", chinese: "a. å¤§å…¬å¸çš„ï¼›å…¨ä½“çš„ï¼›é›†ä½“çš„" },
                { english: "compulsory", chinese: "a. å¿…é¡»åšçš„ï¼›ä¹‰åŠ¡çš„ï¼›å¼ºåˆ¶çš„" },
                { english: "offset", chinese: "vt. æŠµæ¶ˆï¼›è¡¥å¿" },
                { english: "tropical", chinese: "a. çƒ­å¸¦çš„ï¼›æ¥è‡ªçƒ­å¸¦çš„" },
                { english: "aviation", chinese: "n. [U] é£è¡Œï¼ˆæœ¯ï¼‰ï¼›èˆªç©º" },
                { english: "hemisphere", chinese: "n. [C]ï¼ˆåœ°çƒçš„ï¼‰åŠçƒï¼›ï¼ˆå¤§è„‘çš„ï¼‰åŠçƒ" },
                { english: "solve", chinese: "vt. è§£å†³ï¼ˆé—®é¢˜ï¼‰ï¼›è§£ç­”ï¼ˆé—®é¢˜ï¼‰ï¼›ç ´è§£ï¼ˆéš¾é¢˜ï¼‰" },
                { english: "stubborn", chinese: "a. éš¾ä»¥å»é™¤ï¼ˆæˆ–å¯¹ä»˜ã€ä½¿ç”¨ï¼‰çš„ï¼›é¡½å›ºçš„ï¼›å›ºæ‰§çš„ï¼›é¡½å›ºçš„ï¼›æ‰§æ‹—çš„ï¼›å€”å¼ºçš„" }
            ],
            4: [
                { english: "optimum", chinese: "a. æœ€ä¼˜çš„ï¼›æœ€é€‚å®œçš„" },
                { english: "contend", chinese: "vi. ç«äº‰ï¼›äº‰å¤ºï¼›vt. å£°ç§°ï¼›æ–­è¨€ï¼›ä¸»å¼ " },
                { english: "abolish", chinese: "vt. åºŸæ­¢ï¼ˆå°¤æŒ‡å·²å­˜åœ¨å¾ˆä¹…çš„æ³•å¾‹ã€åˆ¶åº¦ç­‰ï¼‰" },
                { english: "degrade", chinese: "vt. ä½¿é™çº§ï¼›ä½¿ä¸¢è„¸ï¼›vi. é™çº§ï¼›ä¸¢è„¸" },
                { english: "adverse", chinese: "a. ä¸åˆ©çš„ï¼›æœ‰å®³çš„ï¼›åé¢çš„" },
                { english: "conform", chinese: "vi. éµå®ˆï¼›ç¬¦åˆ" },
                { english: "venue", chinese: "n. [U] æ”¶å…¥ï¼Œæ”¶ç›Šï¼ˆå°¤æŒ‡å…¬å¸æˆ–ç»„ç»‡æ•°é¢åºå¤§çš„ï¼‰" },
                { english: "polar", chinese: "a. æåœ°çš„ï¼›å®Œå…¨ç›¸åçš„" },
                { english: "pastime", chinese: "n. [C] æ¶ˆé£ï¼›å¨±ä¹" },
                { english: "coincide", chinese: "vi. ç›¸ç¬¦ï¼Œæä¸ºç±»ä¼¼ï¼›ï¼ˆä¸¤ä»¶æˆ–æ›´å¤šçš„äº‹æƒ…ï¼‰åŒæ—¶å‘ç”Ÿ" },
                { english: "voluntary", chinese: "a. è‡ªæ„¿çš„ï¼›è‡ªåŠ¨çš„" },
                { english: "designate", chinese: "vt. å‘½åï¼›æŒ‡å®šï¼›æ ‡æ˜" },
                { english: "contrive", chinese: "vt. è°‹åˆ’ï¼›ç­–åˆ’ï¼›è®¾æ³•åšåˆ°" },
                { english: "manual", chinese: "a. æ‰‹å·¥çš„ï¼›ä½“åŠ›çš„ï¼›n. [C] æ‰‹å†Œï¼›æŒ‡å—" },
                { english: "mayor", chinese: "n. [C] å¸‚é•¿" }
            ],
            5: [
                { english: "unforgettable", chinese: "a. ä¸ä¼šè¢«é—å¿˜çš„ï¼›éš¾å¿˜çš„" },
                { english: "rip", chinese: "v. æ’•ï¼›æ’•è£‚ï¼›ï¼ˆè¢«ï¼‰æ‰¯å¼€ï¼›vt. çŒ›åŠ›å»æ‰" },
                { english: "boundary", chinese: "n. [C] è¾¹ç•Œï¼›ç•Œé™ï¼›åˆ†ç•Œçº¿" },
                { english: "patriotic", chinese: "a. çˆ±å›½çš„ï¼›æœ‰çˆ±å›½å¿ƒçš„" },
                { english: "trigger", chinese: "vt. è§¦å‘ï¼›æ¿€å‘ï¼ˆå°¤æŒ‡ä¸€ç³»åˆ—äº‹ä»¶ï¼‰ï¼›n. [C]ï¼ˆæªçš„ï¼‰æ‰³æœºï¼›è¯±å› " },
                { english: "tearfully", chinese: "ad. å«æ³ªåœ°ï¼›æµæ³ªåœ°ï¼›å¯èƒ½ä¼šå“­åœ°" },
                { english: "embody", chinese: "vt. å…·ä½“è¡¨ç°ï¼Œä½“ç°ï¼Œä»£è¡¨ï¼ˆæ€æƒ³æˆ–å“è´¨ï¼‰" },
                { english: "lofty", chinese: "a.ï¼ˆæ€æƒ³ã€ç›®æ ‡ç­‰ï¼‰å´‡é«˜çš„ï¼›ï¼ˆå»ºç­‘ç‰©ã€å±±ç­‰ï¼‰å·å³¨çš„ï¼Œé«˜è€¸çš„" },
                { english: "rejuvenation", chinese: "n. [U] æ¢å¤é’æ˜¥ï¼›æ¢å¤æ´»åŠ›ï¼›å¤å…´" },
                { english: "milestone", chinese: "n. [C] é‡å¤§äº‹ä»¶ï¼›é‡Œç¨‹ç¢‘" },
                { english: "dock", chinese: "v.ï¼ˆä½¿ï¼‰ï¼ˆèˆ¹ï¼‰åœé ç å¤´ï¼›ï¼ˆä½¿å®‡å®™é£èˆ¹åœ¨å¤–å±‚ç©ºé—´ï¼‰å¯¹æ¥ï¼›n. [C] ç å¤´ï¼›èˆ¹å" },
                { english: "blueprint", chinese: "n. [C] è®¡åˆ’ï¼›è®¾æƒ³ï¼›è“å›¾" },
                { english: "batch", chinese: "n. [C] ä¸€æ‰¹ï¼›ä¸€ç»„" },
                { english: "feat", chinese: "n. [C] ä¸šç»©ï¼›åŠŸç»©ï¼›å£®ä¸¾" },
                { english: "momentous", chinese: "a. å…³é”®çš„ï¼›é‡è¦çš„" }
            ],
            6: [
                { english: "slump", chinese: "n. [C, usu. sing.]ï¼ˆç»æµçš„ï¼‰ä¸æ™¯æ°”ï¼Œè§æ¡ï¼›ï¼ˆä»·æ ¼ã€é”€å”®é¢ã€åˆ©æ¶¦ç­‰çš„ï¼‰çªç„¶ä¸‹è·Œï¼›vi. å€’ä¸‹ï¼Œä¿¯ï¼Œé " },
                { english: "originate", chinese: "vi. å‘æºï¼›å¼€å§‹" },
                { english: "mortgage", chinese: "n. [C] æŠµæŠ¼ï¼›æŒ‰æ­" },
                { english: "loan", chinese: "n. [C]ï¼ˆé“¶è¡Œç­‰çš„ï¼‰è´·æ¬¾ï¼›vt. å€Ÿç»™ï¼ˆå°¤æŒ‡é’±ï¼‰" },
                { english: "subsidiary", chinese: "n. [C] å­å…¬å¸ï¼›é™„å±å…¬å¸" },
                { english: "sizable", chinese: "a. ç›¸å½“å¤§çš„" },
                { english: "drastic", chinese: "a. æ¿€çƒˆçš„ï¼›ä¸¥å‰çš„ï¼›çªç„¶çš„" },
                { english: "spiral", chinese: "vi. ä¸æ–­åœ°æ¶åŒ–ï¼ˆæˆ–å¢é•¿ã€å‡å°‘ï¼‰ï¼›èºæ—‹å½¢ä¸Šå‡ï¼ˆæˆ–ä¸‹é™ï¼‰ï¼›n. [C] èºæ—‹çº¿ï¼›èºçº¿" },
                { english: "lay-off", chinese: "n. [C] è§£é›‡ï¼Œè£å‘˜" },
                { english: "termination", chinese: "n. [C, U] ç»“æŸï¼›ç»ˆæ­¢" },
                { english: "rebound", chinese: "n. [C]ï¼ˆå•†ä¸šçš„ï¼‰å¤è‹ï¼›æŒ¯å…´ï¼›vi. åå¼¹ï¼›è·³å›" },
                { english: "tenant", chinese: "n. [C] æˆ¿å®¢ï¼›ç§Ÿæˆ·" },
                { english: "eviction", chinese: "n. [C, U] é©±é€ï¼›é©±èµ¶" },
                { english: "expire", chinese: "vi.ï¼ˆæ–‡ä»¶ã€åè®®ç­‰ï¼‰åˆ°æœŸï¼Œå› åˆ°æœŸè€Œå¤±æ•ˆã€ç»ˆæ­¢" },
                { english: "migrant", chinese: "n. [C]ï¼ˆå°¤æŒ‡ä¸ºå¯»æ‰¾å·¥ä½œè€Œè¿ç§»çš„ï¼‰ç§»æ°‘ï¼Œç§»å±…è€…" }
            ]
        };

        // å•å…ƒæ•°æ®
        const unitData = {
            1: {
                title: "Unit 1",
                topic: "The digital age: Are we ready?",
                description: "æ•°å­—æ—¶ä»£ï¼šæˆ‘ä»¬å‡†å¤‡å¥½äº†å—ï¼Ÿ"
            },
            2: {
                title: "Unit 2",
                topic: "Life stories",
                description: "äººç”Ÿæ•…äº‹"
            },
            3: {
                title: "Unit 3",
                topic: "Let's go",
                description: "è®©æˆ‘ä»¬å‡ºå‘"
            },
            4: {
                title: "Unit 4",
                topic: "When work is a pleasure",
                description: "å½“å·¥ä½œæ˜¯ä¸€ç§ä¹è¶£"
            },
            5: {
                title: "Unit 5",
                topic: "China's space dream",
                description: "ä¸­å›½çš„å¤ªç©ºæ¢¦"
            },
            6: {
                title: "Unit 6",
                topic: "The economy: Power behind everyday life",
                description: "ç»æµï¼šæ—¥å¸¸ç”Ÿæ´»çš„åŠ¨åŠ›"
            }
        };

        // æ¸¸æˆçŠ¶æ€å˜é‡
        let gameActive = false;
        let gameStarted = false;
        let gamePaused = false;
        let startTime;
        let pauseStartTime = 0;
        let totalPauseTime = 0;
        let timerInterval;
        let currentPlayer = 1;
        let selectedCard = null;
        let player1Score = 0;
        let player2Score = 0;
        let player1Matched = 0;
        let player2Matched = 0;
        let totalPairs = 0;
        let gameMode = "single";
        let currentUnit = 1;
        let currentDifficulty = 10;

        // DOMå…ƒç´ 
        const unitSelectionPage = document.getElementById('unitSelectionPage');
        const unitDetailPage = document.getElementById('unitDetailPage');
        const gamePage = document.getElementById('gamePage');
        const unitCards = document.querySelectorAll('.unit-card');
        const backButton = document.getElementById('backButton');
        const backToDetailButton = document.getElementById('backToDetailButton');
        const currentUnitElement = document.getElementById('currentUnit');
        const unitDropdown = document.getElementById('unitDropdown');
        const challengeButton = document.getElementById('challengeButton');
        const pkButton = document.getElementById('pkButton');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const resumeBtn = document.getElementById('resumeBtn');
        const restartBtn = document.getElementById('restartBtn');
        const difficultySelect = document.getElementById('difficulty');
        const timerDisplay = document.getElementById('timerDisplay');
        const player1ScoreDisplay = document.getElementById('player1Score');
        const player2ScoreDisplay = document.getElementById('player2Score');
        const player1CardsContainer = document.getElementById('player1Cards');
        const player2CardsContainer = document.getElementById('player2Cards');
        const player1Indicator = document.getElementById('player1Indicator');
        const player2Indicator = document.getElementById('player2Indicator');
        const successModal = document.getElementById('successModal');
        const winnerText = document.getElementById('winnerText');
        const completionTime = document.getElementById('completionTime');
        const closeModalBtn = document.getElementById('closeModal');
        const pauseOverlay = document.getElementById('pauseOverlay');
        const currentUnitDisplay = document.getElementById('currentUnitDisplay');
        const currentModeDisplay = document.getElementById('currentModeDisplay');
        const currentDifficultyDisplay = document.getElementById('currentDifficultyDisplay');

        // é¡µé¢åˆ‡æ¢å‡½æ•°
        function showPage(pageId) {
            // éšè—æ‰€æœ‰é¡µé¢
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });

            // æ˜¾ç¤ºæŒ‡å®šé¡µé¢
            document.getElementById(pageId).classList.add('active');
        }

        // å•å…ƒå¡ç‰‡ç‚¹å‡»äº‹ä»¶
        unitCards.forEach(card => {
            card.addEventListener('click', function () {
                const unitId = parseInt(this.getAttribute('data-unit'));
                currentUnit = unitId;

                // æ›´æ–°å•å…ƒè¯¦æƒ…é¡µé¢
                updateUnitDetailPage(unitId);

                // åˆ‡æ¢åˆ°å•å…ƒè¯¦æƒ…é¡µé¢
                showPage('unitDetailPage');
            });
        });

        // è¿”å›æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        backButton.addEventListener('click', function () {
            showPage('unitSelectionPage');
        });

        backToDetailButton.addEventListener('click', function () {
            showPage('unitDetailPage');
        });

        // æ›´æ–°å•å…ƒè¯¦æƒ…é¡µé¢
        function updateUnitDetailPage(unitId) {
            const unit = unitData[unitId];
            currentUnitElement.textContent = unit.title;
            unitDropdown.textContent = unit.topic;
        }

        // å¼€å§‹é—¯å…³æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        challengeButton.addEventListener('click', function () {
            gameMode = "single";
            currentDifficulty = parseInt(difficultySelect.value);
            showPage('gamePage');
            setupGame();
        });

        // åŒäººPKæŒ‰é’®ç‚¹å‡»äº‹ä»¶
        pkButton.addEventListener('click', function () {
            gameMode = "double";
            currentDifficulty = parseInt(difficultySelect.value);
            showPage('gamePage');
            setupGame();
        });

        // éŸ³æ•ˆå‡½æ•°
        function playSound(type) {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            let oscillator = audioContext.createOscillator();
            let gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            switch (type) {
                case 'match':
                    oscillator.frequency.setValueAtTime(880, audioContext.currentTime);
                    gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    break;
                case 'error':
                    oscillator.frequency.setValueAtTime(220, audioContext.currentTime);
                    gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    break;
                case 'win':
                    // æ’­æ”¾èƒœåˆ©éŸ³æ•ˆåºåˆ—
                    const frequencies = [523.25, 659.25, 783.99, 1046.50];
                    const times = [0, 0.2, 0.4, 0.6];

                    frequencies.forEach((freq, i) => {
                        setTimeout(() => {
                            const osc = audioContext.createOscillator();
                            const gain = audioContext.createGain();
                            osc.connect(gain);
                            gain.connect(audioContext.destination);
                            osc.frequency.setValueAtTime(freq, audioContext.currentTime);
                            gain.gain.setValueAtTime(0.3, audioContext.currentTime);
                            gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                            osc.start(audioContext.currentTime);
                            osc.stop(audioContext.currentTime + 0.3);
                        }, times[i] * 1000);
                    });
                    return; // æå‰è¿”å›ï¼Œä¸æ‰§è¡Œä¸‹é¢çš„oscillatorä»£ç 
                case 'select':
                    oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime);
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                    break;
                case 'pause':
                    oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    break;
            }

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
        }

        // è®¾ç½®æ¸¸æˆï¼ˆä½†ä¸å¼€å§‹è®¡æ—¶ï¼‰
        function setupGame() {
            // æ›´æ–°æ¸¸æˆé¡µé¢æ˜¾ç¤º
            currentUnitDisplay.textContent = unitData[currentUnit].title;
            currentModeDisplay.textContent = gameMode === "single" ? "å•äººæ¨¡å¼" : "åŒäººå¯¹æˆ˜";
            currentDifficultyDisplay.textContent = getDifficultyText(currentDifficulty);

            // é‡ç½®æ¸¸æˆçŠ¶æ€
            gameActive = false;
            gameStarted = false;
            gamePaused = false;
            player1Score = 0;
            player2Score = 0;
            player1Matched = 0;
            player2Matched = 0;
            currentPlayer = 1;
            selectedCard = null;
            totalPauseTime = 0;

            player1ScoreDisplay.textContent = '0';
            player2ScoreDisplay.textContent = '0';
            timerDisplay.textContent = '00:00';

            // æ›´æ–°ç©å®¶æŒ‡ç¤ºå™¨
            updatePlayerIndicator();

            // æ¸…ç©ºå¡ç‰‡å®¹å™¨
            player1CardsContainer.innerHTML = '';
            player2CardsContainer.innerHTML = '';

            // åˆ›å»ºå¡ç‰‡ï¼ˆä½†ä¸å¼€å§‹æ¸¸æˆï¼‰
            const words = [...wordData[currentUnit]];
            const selectedWords = [];
            while (selectedWords.length < currentDifficulty && words.length > 0) {
                const randomIndex = Math.floor(Math.random() * words.length);
                selectedWords.push(words[randomIndex]);
                words.splice(randomIndex, 1);
            }

            totalPairs = selectedWords.length;

            if (gameMode === "single") {
                // å•äººæ¨¡å¼ï¼šåªæ˜¾ç¤ºä¸€ä¸ªæ¸¸æˆåŒºåŸŸ
                document.querySelector('.player-section:nth-child(2)').style.display = 'none';
                createCards(selectedWords, player1CardsContainer);
            } else {
                // åŒäººæ¨¡å¼ï¼šæ˜¾ç¤ºä¸¤ä¸ªæ¸¸æˆåŒºåŸŸ
                document.querySelector('.player-section:nth-child(2)').style.display = 'block';
                createCards(selectedWords, player1CardsContainer);
                createCards(selectedWords, player2CardsContainer);
            }

            // æ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
            clearInterval(timerInterval);

            // éšè—æš‚åœé®ç½©
            pauseOverlay.style.display = 'none';
            pauseBtn.textContent = 'æš‚åœ';

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            startBtn.disabled = false;
            pauseBtn.disabled = true;
        }

        // è·å–éš¾åº¦æ–‡æœ¬
        function getDifficultyText(difficulty) {
            switch (difficulty) {
                case 5: return "å®¹æ˜“ï¼ˆ5è¯ï¼‰";
                case 10: return "æ™®é€šï¼ˆ10è¯ï¼‰";
                case 15: return "å›°éš¾ï¼ˆ15è¯ï¼‰";
                default: return "æ™®é€šï¼ˆ10è¯ï¼‰";
            }
        }

        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            if (gameStarted) return;

            gameActive = true;
            gameStarted = true;

            // å¼€å§‹è®¡æ—¶
            startTime = new Date();
            clearInterval(timerInterval);
            timerInterval = setInterval(updateTimer, 1000);
            updateTimer();

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            startBtn.disabled = true;
            pauseBtn.disabled = false;

            playSound('select');
        }

        // æš‚åœæ¸¸æˆ
        function pauseGame() {
            if (!gameActive || gamePaused) return;

            gamePaused = true;
            pauseStartTime = new Date();

            // åœæ­¢è®¡æ—¶å™¨
            clearInterval(timerInterval);

            // æ˜¾ç¤ºæš‚åœé®ç½©
            pauseOverlay.style.display = 'flex';
            pauseBtn.textContent = 'å·²æš‚åœ';

            playSound('pause');
        }

        // ç»§ç»­æ¸¸æˆ
        function resumeGame() {
            if (!gamePaused) return;

            gamePaused = false;

            // è®¡ç®—æš‚åœæ—¶é—´
            const pauseEndTime = new Date();
            totalPauseTime += (pauseEndTime - pauseStartTime);

            // é‡æ–°å¼€å§‹è®¡æ—¶å™¨
            timerInterval = setInterval(updateTimer, 1000);

            // éšè—æš‚åœé®ç½©
            pauseOverlay.style.display = 'none';
            pauseBtn.textContent = 'æš‚åœ';

            playSound('select');
        }

        // åˆ›å»ºå¡ç‰‡
        function createCards(words, container) {
            // åˆ›å»ºè‹±æ–‡å’Œä¸­æ–‡å¡ç‰‡
            const englishCards = [];
            const chineseCards = [];

            words.forEach(word => {
                const englishCard = document.createElement('div');
                englishCard.className = 'card english-card';
                englishCard.textContent = word.english;
                englishCard.dataset.word = word.english;
                englishCard.dataset.type = 'english';
                englishCards.push(englishCard);

                const chineseCard = document.createElement('div');
                chineseCard.className = 'card chinese-card';
                chineseCard.textContent = word.chinese;
                chineseCard.dataset.word = word.english;
                chineseCard.dataset.type = 'chinese';
                chineseCards.push(chineseCard);
            });

            // åˆå¹¶å¹¶éšæœºæ’åºå¡ç‰‡
            const allCards = [...englishCards, ...chineseCards];
            shuffleArray(allCards);

            // æ·»åŠ åˆ°å®¹å™¨
            allCards.forEach(card => {
                container.appendChild(card);

                // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                card.addEventListener('click', function () {
                    handleCardClick(this, container.id === 'player1Cards' ? 1 : 2);
                });
            });
        }

        // æ•°ç»„éšæœºæ’åº
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // æ›´æ–°è®¡æ—¶å™¨
        function updateTimer() {
            if (!gameActive) return;

            const currentTime = new Date();
            const elapsedTime = Math.floor((currentTime - startTime - totalPauseTime) / 1000);
            const minutes = Math.floor(elapsedTime / 60).toString().padStart(2, '0');
            const seconds = (elapsedTime % 60).toString().padStart(2, '0');

            timerDisplay.textContent = `${minutes}:${seconds}`;
        }

        // æ›´æ–°ç©å®¶æŒ‡ç¤ºå™¨
        function updatePlayerIndicator() {
            if (gameMode === "single") {
                player1Indicator.style.display = 'none';
                player2Indicator.style.display = 'none';
            } else {
                player1Indicator.style.display = currentPlayer === 1 ? 'block' : 'none';
                player2Indicator.style.display = currentPlayer === 2 ? 'block' : 'none';
            }
        }

        // å¤„ç†å¡ç‰‡ç‚¹å‡»
        function handleCardClick(card, player) {
            if (!gameActive || gamePaused) return;

            // åœ¨åŒäººæ¨¡å¼ä¸‹ï¼Œåªæœ‰å½“å‰ç©å®¶å¯ä»¥æ“ä½œ
            if (gameMode === "double" && player !== currentPlayer) return;

            if (!card.classList.contains('card') || card.classList.contains('matched')) return;

            // é˜²æ­¢é‡å¤ç‚¹å‡»åŒä¸€å¼ å¡ç‰‡
            if (card === selectedCard) return;

            // æ’­æ”¾é€‰æ‹©éŸ³æ•ˆ
            playSound('select');

            // æ·»åŠ é€‰ä¸­æ•ˆæœ
            card.classList.add('selected');

            // å¦‚æœæ²¡æœ‰å·²é€‰ä¸­çš„å¡ç‰‡ï¼Œåˆ™é€‰ä¸­å½“å‰å¡ç‰‡
            if (!selectedCard) {
                selectedCard = { card: card, player: player };
                return;
            }

            // å¦‚æœå·²ç»æœ‰ä¸€å¼ é€‰ä¸­çš„å¡ç‰‡ï¼Œæ£€æŸ¥æ˜¯å¦åŒ¹é…
            if (selectedCard.card.dataset.word === card.dataset.word &&
                selectedCard.card.dataset.type !== card.dataset.type) {
                // åŒ¹é…æˆåŠŸ
                setTimeout(() => {
                    selectedCard.card.classList.add('matched');
                    card.classList.add('matched');
                    selectedCard = null;

                    // æ’­æ”¾åŒ¹é…æˆåŠŸéŸ³æ•ˆ
                    playSound('match');

                    // æ›´æ–°åˆ†æ•°å’ŒåŒ¹é…è®¡æ•°
                    if (gameMode === "single") {
                        player1Score += 5;
                        player1Matched++;
                        player1ScoreDisplay.textContent = player1Score;
                    } else {
                        if (currentPlayer === 1) {
                            player1Score += 5;
                            player1Matched++;
                            player1ScoreDisplay.textContent = player1Score;
                        } else {
                            player2Score += 5;
                            player2Matched++;
                            player2ScoreDisplay.textContent = player2Score;
                        }
                    }

                    // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
                    checkGameCompletion();
                }, 300);
            } else {
                // åŒ¹é…å¤±è´¥
                setTimeout(() => {
                    selectedCard.card.classList.remove('selected');
                    card.classList.remove('selected');
                    selectedCard = null;

                    // æ’­æ”¾é”™è¯¯éŸ³æ•ˆ
                    playSound('error');

                    // åœ¨åŒäººæ¨¡å¼ä¸‹åˆ‡æ¢ç©å®¶
                    if (gameMode === "double") {
                        currentPlayer = currentPlayer === 1 ? 2 : 1;
                        updatePlayerIndicator();
                    }
                }, 500);
            }
        }

        // æ£€æŸ¥æ¸¸æˆæ˜¯å¦å®Œæˆ
        function checkGameCompletion() {
            if (gameMode === "single") {
                // å•äººæ¨¡å¼ï¼šæ‰€æœ‰å•è¯åŒ¹é…å®Œæˆ
                if (player1Matched === totalPairs) {
                    endGame();
                }
            } else {
                // åŒäººæ¨¡å¼ï¼šä»»æ„ä¸€ä¸ªç©å®¶å®Œæˆæ‰€æœ‰å•è¯åŒ¹é…
                if (player1Matched === totalPairs || player2Matched === totalPairs) {
                    endGame();
                }
            }
        }

        // ç»“æŸæ¸¸æˆ
        function endGame() {
            gameActive = false;
            gameStarted = false;
            clearInterval(timerInterval);

            // ç¡®å®šè·èƒœè€…
            let winner;
            if (gameMode === "single") {
                winnerText.textContent = "æ­å–œä½ å®Œæˆäº†æ¸¸æˆï¼";
            } else {
                if (player1Matched === totalPairs && player2Matched === totalPairs) {
                    // åŒæ—¶å®Œæˆï¼Œæ¯”è¾ƒåˆ†æ•°
                    if (player1Score > player2Score) {
                        winner = 1;
                    } else if (player2Score > player1Score) {
                        winner = 2;
                    } else {
                        winner = 0; // å¹³å±€
                    }
                } else if (player1Matched === totalPairs) {
                    winner = 1;
                } else {
                    winner = 2;
                }

                if (winner === 0) {
                    winnerText.textContent = "å¹³å±€ï¼";
                } else {
                    winnerText.textContent = `ç©å®¶${winner}è·èƒœï¼`;
                }
            }

            completionTime.textContent = timerDisplay.textContent;
            successModal.style.display = 'flex';

            // æ’­æ”¾èƒœåˆ©éŸ³æ•ˆ
            playSound('win');
        }

        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            gameActive = false;
            gameStarted = false;
            clearInterval(timerInterval);
            setupGame();
        }

        // è¿”å›ä¸»é¡µé¢
        function returnToMain() {
            successModal.style.display = 'none';
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            gameActive = false;
            gameStarted = false;
            clearInterval(timerInterval);
            player1CardsContainer.innerHTML = '';
            player2CardsContainer.innerHTML = '';
            player1ScoreDisplay.textContent = '0';
            player2ScoreDisplay.textContent = '0';
            timerDisplay.textContent = '00:00';
            // æ˜¾ç¤ºç¬¬äºŒä¸ªç©å®¶åŒºåŸŸï¼ˆå¦‚æœè¢«éšè—äº†ï¼‰
            document.querySelector('.player-section:nth-child(2)').style.display = 'block';
            // è¿”å›å•å…ƒé€‰æ‹©é¡µé¢
            showPage('unitSelectionPage');
        }

        // äº‹ä»¶ç›‘å¬
        startBtn.addEventListener('click', startGame);
        pauseBtn.addEventListener('click', pauseGame);
        resumeBtn.addEventListener('click', resumeGame);
        restartBtn.addEventListener('click', restartGame);
        closeModalBtn.addEventListener('click', returnToMain);

        // åˆå§‹åŒ–
        timerDisplay.textContent = "00:00";
        // é»˜è®¤éšè—ç¬¬äºŒä¸ªç©å®¶åŒºåŸŸï¼ˆå•äººæ¨¡å¼ï¼‰
        document.querySelector('.player-section:nth-child(2)').style.display = 'none';
    </script>
</body>

</html>